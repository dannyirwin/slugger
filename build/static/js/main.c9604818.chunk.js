(this.webpackJsonpslugger=this.webpackJsonpslugger||[]).push([[0],{12:function(t,e,n){},13:function(t,e,n){},15:function(t,e,n){"use strict";n.r(e);var i=n(1),o=n.n(i),s=n(6),r=n.n(s),a=(n(12),n(7)),c=(n(13),n(0));function l(){return Object(c.jsx)("header",{children:Object(c.jsx)("h1",{children:"Slugger!"})})}function h(){return Object(c.jsx)("section",{className:"side",children:"This project was built as a daily warm up and tutorial series"})}var u=n(5),d={numOfCells:16,responsiveSize:!0,gameSize:6e4,backgroundColor:"#c3faa2",fps:5};function f(){var t=Object(i.useRef)();return Object(i.useEffect)((function(){!function(t){var e=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,s=t.getContext("2d"),r=d.numOfCells,a=d.responsiveSize?h():d.gameSize,c=a/r,l=d.backgroundColor;function h(){return.9*(window.innerWidth<window.innerHeight?window.innerWidth:window.innerHeight)}function f(){t.height=a,t.width=a}function g(){s.fillStyle=l,s.fillRect(0,0,a,a),s.fillStyle="rgba(255,255,255, 0.2)";for(var t=0;t<r;t+=2)for(var e=0;e<r;e+=2)s.fillRect(t*c,e*c,c,c),s.fillRect((t+1)*c,(e+1)*c,c,c)}function v(t){return[Math.floor(t[0]*c+.5*c),Math.floor(t[1]*c+.5*c)]}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"salmon",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.floor(r/2),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.floor(r/2);return{color:t,direction:"north",bellyPositions:[],isDigesting:!1,segmentPositions:[[e,n],[e,n+1],[e,n+2]],update:function(){this.checkCollision(),this.moveSlug(),this.handleDigestion(),this.drawSlug(),this.drawBelly(),this.drawHead()},drawSlug:function(){s.strokeStyle=this.color,s.lineWidth=.8*c,s.lineCap="round",s.lineJoin="round",s.beginPath(),this.segmentPositions.forEach((function(t,e){var n=v(t);0===e?s.moveTo(n[0],n[1]):s.lineTo(n[0],n[1])})),s.stroke()},drawHead:function(){var t=v(this.segmentPositions[0]),e=t[0],n=t[1],i=c,o="south"===this.direction?-2:2;s.beginPath(),s.lineWidth=.1*c;var r=i*Math.cos(o),a=i*Math.sin(o);s.moveTo(e+r,n-a),s.lineTo(e,n),s.lineTo(e-r,n-a),s.stroke()},drawBelly:function(){this.isDigesting&&(s.fillStyle=this.color,this.bellyPositions.forEach((function(t){t=v(t),s.beginPath(),s.arc(t[0],t[1],.5*c,0,2*Math.PI),s.fill()})))},moveSlug:function(){this.segmentPositions.pop(),this.segmentPositions.unshift(this.findNextPosition())},findNextPosition:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.direction,e=this.segmentPositions[0],n=[];switch(t){case"north":n[0]=e[0],n[1]=e[1]-1;break;case"west":n[0]=e[0]-1,n[1]=e[1];break;case"south":n[0]=e[0],n[1]=e[1]+1;break;case"east":n[0]=e[0]+1,n[1]=e[1];break;default:console.error("ERROR: expected 'north' 'south' 'east' or 'west' but got "+t)}return n},checkCollision:function(){var t=this.findNextPosition(),e=Object(u.a)(this.segmentPositions);e.pop();var n=e.some((function(e){return e[0]===t[0]&&e[1]===t[1]})),i=t[0]<0||t[0]>r-1||t[1]<0||t[1]>r-1,o=t[0]===E.position[0]&&t[1]===E.position[1];n||i?(k=!0,w()):o&&this.handleEatSnack()},handleEatSnack:function(){this.bellyPositions.push(E.position),this.isDigesting=!0,E.handleEaten()},handleMovementInput:function(t){var e=this.findNextPosition(t);!this.segmentPositions.some((function(t){return t[0]===e[0]&&t[1]===e[1]}))&&(this.direction=t)},handleDigestion:function(){var t=this;this.isDigesting&&Object(u.a)(this.bellyPositions).forEach((function(e){var n=t.segmentPositions[t.segmentPositions.length-1];e[0]===n[0]&&e[1]===n[1]&&(t.segmentPositions.push(e),t.bellyPositions.shift(),0===t.bellyPositions.length&&(t.isDigesting=!1))}))}}}function b(){var t={color:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#66b8ff",position:[0,0],randomizePosition:function(){var t=[S.findNextPosition()].concat(S.segmentPositions),e=Math.floor(Math.random()*r),n=Math.floor(Math.random()*r);t.length-2===Math.pow(r,2)?w("You WIN!"):t.some((function(t){return t[0]===e&&t[1]===n}))?this.randomizePosition():this.position=[e,n]},drawSnack:function(){var t=v(this.position);s.fillStyle=this.color,s.beginPath(),s.arc(t[0],t[1],.3*c,0,2*Math.PI),s.fill()},handleEaten:function(){E=b()}};return t.randomizePosition(),t}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Game Over";k=!0,S=m(),E=b(),g(),alert(t)}var p,j,P,k=!0,O=1e3/d.fps;function M(t){j=window.performance.now(),requestAnimationFrame(x)}function x(){p=window.performance.now(),(P=p-j)>O&&(j=p-P%O,g(),S.update(),E.drawSnack()),!k&&requestAnimationFrame(x)}function y(){f(),g(),M()}var S=m(),E=b();window.addEventListener("load",y),document.addEventListener("keydown",(function(t){switch(t.key.toLocaleLowerCase()){case" ":k&&x();break;case"p":!(k=!k)&&requestAnimationFrame(x);break;case"w":case"arrowup":S.handleMovementInput("north");break;case"s":case"arrowdown":S.handleMovementInput("south");break;case"a":case"arrowleft":S.handleMovementInput("west");break;case"d":case"arrowright":S.handleMovementInput("east")}})),e&&n&&i&&o&&(e.addEventListener("click",(function(){S.handleMovementInput("north")})),n.addEventListener("click",(function(){S.handleMovementInput("south")})),i.addEventListener("click",(function(){S.handleMovementInput("west")})),o.addEventListener("click",(function(){S.handleMovementInput("east")})))}(t.current)})),Object(c.jsx)("canvas",{ref:t})}function g(t){t.setMovementButtons;return Object(c.jsxs)("section",{className:"side",children:[Object(c.jsx)("h2",{children:"How To Play"}),"Control the slug and eat as many snacks as possible! Careful not to run into the edge or yourself as you grow.",Object(c.jsxs)("ul",{children:[Object(c.jsx)("li",{children:"Use WSAD or your arrow keys to control the slug"}),Object(c.jsx)("li",{children:'Begin the game by pressing "p"'})]})]})}function v(t){var e=t.setMovementButtons;return Object(c.jsxs)("main",{children:[Object(c.jsx)(g,{setMovementButtons:e}),Object(c.jsx)(f,{}),Object(c.jsx)(h,{})]})}var m=function(){var t=Object(i.useState)({}),e=Object(a.a)(t,2),n=(e[0],e[1]);return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(l,{}),Object(c.jsx)(v,{setMovementButtons:n})]})},b=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,16)).then((function(e){var n=e.getCLS,i=e.getFID,o=e.getFCP,s=e.getLCP,r=e.getTTFB;n(t),i(t),o(t),s(t),r(t)}))};r.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(m,{})}),document.getElementById("root")),b()}},[[15,1,2]]]);
//# sourceMappingURL=main.c9604818.chunk.js.map